<root main_tree_to_execute="HumanAisleTree">
    <include path="BTRegularNav.xml"/>
    <BehaviorTree ID="HumanAisleTree">
        <Fallback name="BlockingFallback">
            <Sequence name="WaitUntilRobotMoves">
                <IsRobotBlocking agent_id="{id}" distance="2.0"/>
                <MakeGesture agent_id="{id}" message="1" /> <!-- Wait gesture while blocking -->
            </Sequence>
            <Sequence name="MoveTowardsGoal">
                <MakeGesture agent_id="{id}" message="0"/> <!-- No gesture when moving towards goal -->
                <SetBlackboard output_key="agentid" value="{id}" />
                <SetBlackboard output_key="timestep" value="{dt}" />
                <SubTree ID="RegularNavTree" id="agentid" dt="timestep" /> <!-- Using Subtree for regular navigation -->
            </Sequence>
        </Fallback>
    </BehaviorTree>
</root>